<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Validator Test</title>
    <script language="JavaScript" src="validator.js"></script>
    <script language="JavaScript" src="custom_validator_patterns.js"></script>
    <script language="JavaScript">
      var v = Validator;
      
      v.call_back = function() {
        if(!item.corrected) {
          alert(item.message);
        }
      };
      
      var min_size_pattern = {
        validates : ['size'],
        size : {
          minimium : 4
        }
      };
      
      // v.ensure({
      // 'item1' : '字段1',
      // 'item2' : '字段2'
      // }, {
      // validates : ['size'],
      // size : {
      // minimium : 6
      // },
      // });
      
      v.ensure({
        'item1' : '字段1'
      }, {
        validates : ['presence']
      });
      v.ensure({
        'item2' : '字段2'
      }, min_size_pattern);
      v.ensure({
        'item3' : '字段3'
      }, {
        validates : ['size'],
        size : {
          maximium : 6
        }
      });
      v.ensure({
        'item4' : '字段4'
      }, {
        validates : ['size'],
        size : {
          minimium : 4,
          maximium : 6
        }
      });
      v.ensure({
        'item5' : '字段5'
      }, {
        validates : ['format'],
        format : /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/,
        message : '{alias}不是有效的email地址。'
      });
      v.ensure({
        'item6' : '字段6'
      }, {
        validates : ['shoulda'],
        shoulda : function() {
          return value == 'hello'
        },
        message : '{alias}不是hello。'
      });
      v.ensure({
        'item7' : '字段7'
      }, {
        validates : ['inclusion'],
        inclusion : ['male', 'female']
      });
      v.ensure({
        'item8' : '字段8'
      }, {
        validates : ['presence', 'exclusion'],
        exclusion : ['nil', 'null']
      });
      v.ensure({
        'item9' : '字段9'
      }, {
        validates : ['date']
      });
    </script>
  </head>
  <body>
    <form action="#" method="get" id="test_form" onsubmit="return v.check_form()">
      <label> not empty:
        <input type="text" name="item1" id="item1" onblur="v.check(this)"/>
      </label>
      <br />
      <label> more than 4:
        <input type="text" name="item2" id="item2" />
      </label>
      <br />
      <label> less than 6:
        <input type="text" name="item3" id="item3" />
      </label>
      <br />
      <label> between 4 and 6:
        <input type="text" name="item4" id="item4" />
      </label>
      <br />
      <label> custom regex:
        <input type="text" name="item5" id="item5" />
      </label>
      <br />
      <label> by function:
        <input type="text" name="item6" id="item6" />
      </label>
      <br />
      <label> inclusion:
        <input type="text" name="item7" id="item7" />
      </label>
      <br />
      <label> exclusion:
        <input type="text" name="item8" id="item8" />
      </label>
      <br />
      <label> custom(date):
        <input type="text" name="item9" id="item9" />
      </label>
      <br />
      <input type="submit" />
    </form>
  </body>
</html>
